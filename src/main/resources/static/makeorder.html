<<<<<<< HEAD

=======
>>>>>>> upstream/master
<!DOCTYPE html>
<html>
<head>
    <title>发布订单</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
<<<<<<< HEAD
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Simplified Contact Form template Responsive, Login form web template,Flat Pricing tables,Flat Drop downs  Sign up Web Templates, Flat Web Templates, Login sign up Responsive web template, SmartPhone Compatible web template, free WebDesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
    <script type="application/x-javascript">
        addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); }
    </script>
    <link href="css/makeorder.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" href="font/flaticon/font/flaticon.css">
    <link rel="stylesheet" href="css/bootstrap.css">
=======
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script type="application/x-javascript">
        addEventListener("load", function () {
            setTimeout(hideURLbar, 0);
        }, false);

        function hideURLbar() {
            window.scrollTo(0, 1);
        }
    </script>
    <link href="css/makeorder.css" rel="stylesheet" type="text/css" media="all"/>
    <link rel="stylesheet" href="font/flaticon/font/flaticon.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="libs/layui/css/layui.css">
>>>>>>> upstream/master
</head>
<body>
<!-- main -->
<!--发布订单，我用的表格的形式-->
<<<<<<< HEAD
<div class="bg">
    <div id="hint"><!-- 提示框 -->
        <p id="hintmsg">提示信息</p>
    </div>
=======
<div id="hint"><!-- 提示框 -->
    <p id="hintmsg">提示信息</p>
</div>
<div class="bg">
>>>>>>> upstream/master
    <div class="top-right">
        <div class="container">
            <span class="top-left"><a href="index.html"><i class="flaticon-hotel"></i>&nbsp;&nbsp;首页</a></span>
            <div class="top-right-text">
<<<<<<< HEAD
               <span><a href="#" class="nav-link">
                   <i class="flaticon-logout"></i>&nbsp;&nbsp;登录
               </a></span>
                <span class=""><a href="" class="nav-link link-color" >
=======
               <span><a href="login.html" class="nav-link">
                   <i class="flaticon-logout"></i>&nbsp;&nbsp;登录
               </a></span>
                <span class=""><a href="/personal.html" class="nav-link link-color">
>>>>>>> upstream/master
                   <i class="flaticon-user"></i>&nbsp;&nbsp;个人中心
               </a></span>
            </div>
        </div>

    </div>
    <div class="main">
        <!--<h1>订单发布</h1>-->
        <div class="main-row">
            <h2>订单发布</h2>
            <p>请根据您的要求填写信息表! </p>
            <div class="w3ls-contact">
<<<<<<< HEAD
                <form action="#" method="get">
                    <h4>您的需求是？</h4>
                    <input type="text" name="Name" id="title" required="">
                    <h4>您的起点位置是？</h4>
                    <input type="text" name="Mobile Number" id="start" required="">
                    <h4>您的终点位置是？</h4>
                    <input type="email" name="Email" id="end" required="">
                    <h4>您的酬金是？</h4>
                    <input type="text" id="reward" required="">
                    <h4>具体任务说明</h4>
                    <textarea name="Message" id="info" required=""> </textarea>
                    <input type="submit" value="提交">
                    <input type="reset" value="取消">
                    <div class="clear"> </div>
                </form>
=======
                <h4>您的需求是？</h4>
                <input type="text" id="title">
                <h4>您的起点位置是？</h4>
                <input type="text" id="start">
                <h4>您的终点位置是？</h4>
                <input type="text" id="end">
                <h4>您的酬金是？</h4>
                <input type="text" id="reward">
                <h4>具体任务说明</h4>
                <textarea id="info"> </textarea>
                <h4>订单截止时间</h4>
                <input type="text" id="endtime">
                <button onclick="submitOrder()" id="submitBtn">提交</button>
                <button onclick="goto('index.html')">取消</button>
>>>>>>> upstream/master
            </div>
        </div>
    </div>
</div>

<!-- //main -->
</body>
<<<<<<< HEAD
=======
<script src="libs/jquery-2.1.4/jquery.js"></script>
<script src="libs/layui/layui.js"></script>
<script src="js/common.js"></script>

<script>
    //日期选择组件
    layui.use('laydate', function() {
        var laydate = layui.laydate;

        laydate.render({
            elem: '#endtime'
            ,type: 'datetime'
            ,theme: '#a64d4e'
        });

    });

</script>
<script>
    var hit = document.getElementById("hint");

    function submitOrder() {

        var hit = document.getElementById("hint").getElementsByTagName("p")[0];

        var title=$('#title').val();
        var start=$('#start').val();
        var end=$('#end').val();
        var reward=$('#reward').val();
        var info=$('#info').val();
        var endtime=$('#endtime').val();
        if(title===''||start===''||end===''||reward===''||info===''||endtime===''){
            hit.innerText="请输入完整的订单信息";
            console.log('请输入完整的订单信息');
            hint();
            return;
        }
        $.ajax({

            type: "post",
            url: '/order/makeorder',
            data: {
                'title': title,
                'begin': start,
                'end':end,
                'reward':reward,
                'info':info,
                'endtime':endtime

            },
            success: function (d) {
                //根据返回，进行下一步的处理
                if (d.message === 'ok') {
                    hit.innerText="订单发布成功";
                    hint();
                    //禁用按钮一段时间，避免重复提交
                    var subBtn=$('#submitBtn');
                    subBtn.attr("disabled", true);
                    var time=6;
                    var hander=setInterval(function() {
                        if (time <= 0) {
                            clearInterval(hander); //清除倒计时
                            subBtn.text("提交");
                            subBtn.attr("disabled", false);
                            return false;
                        }else {
                            subBtn.text("" + (time--) + "秒后可用");

                        }
                    }, 1000);

                } else {
                    console.log(d.message);
                    //出现错误
                   hit.innerText=d.message;
                   hint();
                }

            }

        })

    }

    function hint() {
        hit.style.display = "block";
        setTimeout("hit.style.opacity = 1", 0);
        setTimeout("hit.style.opacity = 0", 2000);
        setTimeout('hit.style.display = "none"', 3000);
    }
</script>
>>>>>>> upstream/master
</html>